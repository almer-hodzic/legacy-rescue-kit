<mat-card *ngIf="user" class="profile-card">
  <mat-card-header>
    <div mat-card-avatar class="profile-avatar">
      <mat-icon>person</mat-icon>
    </div>
    <mat-card-title>{{ user.userName }}</mat-card-title>
    <mat-card-subtitle>{{ user.email }}</mat-card-subtitle>
  </mat-card-header>

  <mat-divider></mat-divider>

  <mat-card-content>
    <!-- Update Profile Form -->
    <form [formGroup]="profileForm" (ngSubmit)="updateProfile()">
      <h3>Update Profile</h3>
      <label>Email</label>
      <input matInput formControlName="email" type="email" />
      <mat-error *ngIf="email?.touched && email?.hasError('required')">Email is required</mat-error>
      <mat-error *ngIf="email?.touched && email?.hasError('email')">Invalid email format</mat-error>

      <label>Username</label>
      <input matInput formControlName="userName" type="text" />
      <mat-error *ngIf="userName?.touched && userName?.hasError('required')">Username is required</mat-error>

      <button mat-raised-button color="primary" type="submit" [disabled]="profileForm.invalid">Save Changes</button>
    </form>

    <mat-divider style="margin: 1.5rem 0;"></mat-divider>

    <!-- Change Password Form -->
    <form [formGroup]="passwordForm" (ngSubmit)="changePassword()">
      <h3>Change Password</h3>
      <label>Current Password</label>
      <input matInput formControlName="currentPassword" type="password" />
      <mat-error *ngIf="currentPassword?.touched && currentPassword?.hasError('required')">Required</mat-error>

      <label>New Password</label>
      <input matInput formControlName="newPassword" type="password" />
      <mat-error *ngIf="newPassword?.touched && newPassword?.hasError('required')">Required</mat-error>
      <mat-error *ngIf="newPassword?.touched && newPassword?.hasError('minlength')">Min 6 characters</mat-error>

      <button mat-raised-button color="accent" type="submit" [disabled]="passwordForm.invalid">Change Password</button>
    </form>
  </mat-card-content>
</mat-card>
